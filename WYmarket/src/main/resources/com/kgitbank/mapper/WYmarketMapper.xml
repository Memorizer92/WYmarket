<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kgitbank.mapper.WYmarketMapper">

	<select id="selectusernick" resultType="Integer">
		select count(*) from
		sh_userInfo where userNick=#{userNick}
	</select>

	<select id="selectphonenumber" resultType="Integer">
		select count(*) from
		sh_userInfo where phoneNumber=#{phoneNumber, jdbcType=VARCHAR}
	</select>

	<select id="getIpCnt" resultType="Integer">
		select count(*) from
		sh_userIP
		where IP=#{IP}
	</select>

	<select id="getSmsCnt" resultType="int">
		SELECT smsCnt FROM sh_userIP
		WHERE IP = #{IP}
	</select>

	<insert id="insertIp">
		INSERT INTO sh_userIP(IP)
		VALUES (#{IP})
	</insert>

	<update id="updateIpCnt">
		UPDATE sh_userIP SET smsCnt = smsCnt + 1
		WHERE IP = #{IP}
	</update>

	<insert id="insertUserPhNk">
		INSERT INTO sh_userInfo(userID, phoneNumber,
		userNick, latitude, longitude, address)
		VALUES (userID_seq.nextval,
		#{phoneNumber}, #{userNick}, #{latitude}, #{longitude}, #{address})
	</insert>

	<select id="getUserNickByPh" resultType="String">
		select userNick from
		sh_userInfo where phoneNumber=#{phoneNumber}
	</select>

	<select id="getUserNickByMail" resultType="String">
		select userNick from
		sh_userInfo where kakaomail=#{kakaomail}
	</select>


</mapper>


